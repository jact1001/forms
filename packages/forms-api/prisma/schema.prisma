// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  // url      = env("DATABASE_URL")
  url      = "file:./forms.db"
}

model Access {
  userId    String @id
  user_name String
}

model Form {
  id        String    @id @default(cuid())
  form_name String    @unique
  state     String
  author    String
  sections  Section[]
}

model Section {
  id           String  @id @default(cuid())
  section_name String
  access       String
  fields       Field[]
  form         Form    @relation(fields: [form_id], references: [id])
  form_id      String
}

model Field {
  field_id      String  @id @default(cuid())
  form_field_id String
  content       String
  section       Section @relation(fields: [section_id], references: [id])
  section_id    String
}

model UseCase {
  id           String           @id @default(cuid())
  case_name    String
  case_state   String
  case_creator String
  form_id      String
  form_name    String
  sections     UseCaseSection[]
}

model UseCaseSection {
  id           String         @id @default(cuid())
  section_name String
  access       String
  use_case     UseCase        @relation(fields: [use_case_id], references: [id])
  use_case_id  String
  fields       UseCaseField[]
}

model UseCaseField {
  field_id            String         @id @default(cuid())
  form_field_id       String
  content             String
  use_case_section    UseCaseSection @relation(fields: [use_case_section_id], references: [id])
  use_case_section_id String
}

// Es necesario borrar la carpeta migrations para hacer cambios
// Despues de cambiar un modelo se debe ejecutar npx prisma migrate dev --name init
